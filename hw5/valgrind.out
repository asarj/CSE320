==15550== Memcheck, a memory error detector
==15550== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==15550== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==15550== Command: bin/bourse -p 9999
==15550== Parent PID: 15538
==15550== 
==15550== Invalid write of size 1
==15550==    at 0x4C32E00: strcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A6C0: main (main.c:52)
==15550==  Address 0x544c091 is 0 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Invalid write of size 1
==15550==    at 0x4C32E0D: strcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A6C0: main (main.c:52)
==15550==  Address 0x544c094 is 3 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Conditional jump or move depends on uninitialised value(s)
==15550==    at 0x10A7E4: main (main.c:75)
==15550== 
==15550== Invalid write of size 8
==15550==    at 0x10A80F: main (main.c:76)
==15550==  Address 0x544c040 is 0 bytes inside a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A62A: main (main.c:43)
==15550== 
==15550== Invalid write of size 2
==15550==    at 0x10A812: main (main.c:76)
==15550==  Address 0x544c048 is 7 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A62A: main (main.c:43)
==15550== 
==15550== Invalid read of size 1
==15550==    at 0x4C32D04: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x50B84D2: vfprintf (vfprintf.c:1643)
==15550==    by 0x50B967F: buffered_vfprintf (vfprintf.c:2329)
==15550==    by 0x50B6725: vfprintf (vfprintf.c:1301)
==15550==    by 0x50BFE53: fprintf (fprintf.c:32)
==15550==    by 0x10A884: main (main.c:79)
==15550==  Address 0x544c091 is 0 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Invalid read of size 1
==15550==    at 0x50E9532: _IO_default_xsputn (genops.c:412)
==15550==    by 0x50B7FEA: vfprintf (vfprintf.c:1643)
==15550==    by 0x50B967F: buffered_vfprintf (vfprintf.c:2329)
==15550==    by 0x50B6725: vfprintf (vfprintf.c:1301)
==15550==    by 0x50BFE53: fprintf (fprintf.c:32)
==15550==    by 0x10A884: main (main.c:79)
==15550==  Address 0x544c091 is 0 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Invalid read of size 1
==15550==    at 0x50E9540: _IO_default_xsputn (genops.c:411)
==15550==    by 0x50B7FEA: vfprintf (vfprintf.c:1643)
==15550==    by 0x50B967F: buffered_vfprintf (vfprintf.c:2329)
==15550==    by 0x50B6725: vfprintf (vfprintf.c:1301)
==15550==    by 0x50BFE53: fprintf (fprintf.c:32)
==15550==    by 0x10A884: main (main.c:79)
==15550==  Address 0x544c092 is 1 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Invalid read of size 1
==15550==    at 0x50A0A57: ____strtoul_l_internal (strtol_l.c:432)
==15550==    by 0x5163072: getaddrinfo (getaddrinfo.c:2275)
==15550==    by 0x10D040: open_listenfd (csapp.c:1007)
==15550==    by 0x10D200: Open_listenfd (csapp.c:1062)
==15550==    by 0x10A904: main (main.c:97)
==15550==  Address 0x544c091 is 0 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Invalid read of size 1
==15550==    at 0x5163080: getaddrinfo (getaddrinfo.c:2276)
==15550==    by 0x10D040: open_listenfd (csapp.c:1007)
==15550==    by 0x10D200: Open_listenfd (csapp.c:1062)
==15550==    by 0x10A904: main (main.c:97)
==15550==  Address 0x544c094 is 3 bytes after a block of size 1 alloc'd
==15550==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10A63B: main (main.c:43)
==15550== 
==15550== Thread 3:
==15550== Conditional jump or move depends on uninitialised value(s)
==15550==    at 0x4C30CF1: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x10AB2D: brs_client_service (server.c:33)
==15550==    by 0x4E436DA: start_thread (pthread_create.c:463)
==15550==    by 0x517C88E: clone (clone.S:95)
==15550== 
==15550== Invalid read of size 8
==15550==    at 0x10DC88: trader_logout (in /home/student/asarjoo/hw5/bin/bourse)
==15550==    by 0x10AB67: brs_client_service (server.c:39)
==15550==    by 0x4E436DA: start_thread (pthread_create.c:463)
==15550==    by 0x517C88E: clone (clone.S:95)
==15550==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==15550== 
==15550== 
==15550== Process terminating with default action of signal 11 (SIGSEGV)
==15550==  Access not within mapped region at address 0x8
==15550==    at 0x10DC88: trader_logout (in /home/student/asarjoo/hw5/bin/bourse)
==15550==    by 0x10AB67: brs_client_service (server.c:39)
==15550==    by 0x4E436DA: start_thread (pthread_create.c:463)
==15550==    by 0x517C88E: clone (clone.S:95)
==15550==  If you believe this happened as a result of a stack
==15550==  overflow in your program's main thread (unlikely but
==15550==  possible), you can try to increase the size of the
==15550==  main thread stack using the --main-stacksize= flag.
==15550==  The main thread stack size used in this run was 8388608.
==15550== 
==15550== FILE DESCRIPTORS: 9 open at exit.
==15550== Open AF_INET socket 6: 127.0.0.1:9999 <-> 127.0.0.1:35314
==15550==    at 0x4E4D6D7: accept (accept.c:26)
==15550==    by 0x10C581: Accept (csapp.c:585)
==15550==    by 0x10A943: main (main.c:101)
==15550== 
==15550== Open AF_INET socket 5: 0.0.0.0:9999 <-> unbound
==15550==    at 0x517DEC7: socket (syscall-template.S:78)
==15550==    by 0x10D0AA: open_listenfd (csapp.c:1015)
==15550==    by 0x10D200: Open_listenfd (csapp.c:1062)
==15550==    by 0x10A904: main (main.c:97)
==15550== 
==15550== Open file descriptor 13: /dev/shm/bxf_arena_15536 (deleted)
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 12: /dev/shm/bxf_arena_15536 (deleted)
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 4:
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 3: /home/student/asarjoo/hw5/valgrind.out
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 2: /dev/pts/0
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 1: /dev/pts/0
==15550==    <inherited from parent>
==15550== 
==15550== Open file descriptor 0:
==15550==    <inherited from parent>
==15550== 
==15550== 
==15550== HEAP SUMMARY:
==15550==     in use at exit: 4,938 bytes in 8 blocks
==15550==   total heap usage: 17 allocs, 9 frees, 11,434 bytes allocated
==15550== 
==15550== Thread 1:
==15550== 272 bytes in 1 blocks are possibly lost in loss record 6 of 8
==15550==    at 0x4C31B25: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x40134A6: allocate_dtv (dl-tls.c:286)
==15550==    by 0x40134A6: _dl_allocate_tls (dl-tls.c:530)
==15550==    by 0x4E44227: allocate_stack (allocatestack.c:627)
==15550==    by 0x4E44227: pthread_create@@GLIBC_2.2.5 (pthread_create.c:644)
==15550==    by 0x10EB1C: exchange_init (in /home/student/asarjoo/hw5/bin/bourse)
==15550==    by 0x10A8D8: main (main.c:84)
==15550== 
==15550== 272 bytes in 1 blocks are possibly lost in loss record 7 of 8
==15550==    at 0x4C31B25: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==15550==    by 0x40134A6: allocate_dtv (dl-tls.c:286)
==15550==    by 0x40134A6: _dl_allocate_tls (dl-tls.c:530)
==15550==    by 0x4E44227: allocate_stack (allocatestack.c:627)
==15550==    by 0x4E44227: pthread_create@@GLIBC_2.2.5 (pthread_create.c:644)
==15550==    by 0x10C7F2: Pthread_create (csapp.c:680)
==15550==    by 0x10A973: main (main.c:102)
==15550== 
==15550== LEAK SUMMARY:
==15550==    definitely lost: 0 bytes in 0 blocks
==15550==    indirectly lost: 0 bytes in 0 blocks
==15550==      possibly lost: 544 bytes in 2 blocks
==15550==    still reachable: 4,394 bytes in 6 blocks
==15550==         suppressed: 0 bytes in 0 blocks
==15550== Reachable blocks (those to which a pointer was found) are not shown.
==15550== To see them, rerun with: --leak-check=full --show-leak-kinds=all
==15550== 
==15550== For counts of detected and suppressed errors, rerun with: -v
==15550== Use --track-origins=yes to see where uninitialised values come from
==15550== ERROR SUMMARY: 41 errors from 14 contexts (suppressed: 0 from 0)
